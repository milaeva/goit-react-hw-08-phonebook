(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{105:function(t,e,n){},126:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(41),a=n(26),u=n(12),s=n(67),o=n(8),i=n(27),l=n(68),d=n.n(l),b=n(56),j=n(13),f={key:"auth",storage:d.a,whitelist:["token"]},p=Object(o.a)({reducer:{auth:Object(i.g)(f,j.b),contacts:b.c},middleware:Object(o.f)({serializableCheck:{ignoredActions:[i.a,i.f,i.b,i.c,i.d,i.e]}}),devTools:!1}),h=Object(i.h)(p),O=(n(104),n(105),n(57)),g=n.n(O),x=(n(72),n(6)),v=n(143),m=n(145),C=n(146),k=n(38),w=n.n(k),U=n(3),I=function(){var t=Object(u.b)(),e=Object(u.c)(j.c.getUserEmail);return Object(U.jsxs)("div",{className:w.a.userMenu,children:[Object(U.jsx)("p",{className:w.a.text,children:"Welcome,"}),Object(U.jsx)("p",{className:w.a.mail,children:e}),Object(U.jsx)("button",{type:"button",className:w.a.button,onClick:function(){return t(j.a.logOut())},children:"Exit"})]})},y=n(53),_=n.n(y),L=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(a.b,{to:"/login",className:_.a.button,children:"LogIn"}),Object(U.jsx)(a.b,{to:"/register",className:_.a.button,children:"SignUp"})]})},N=n(39),M=n.n(N),T=function(){var t=Object(u.c)(j.c.getIsLoggedIn);return Object(U.jsx)("div",{className:M.a.wrapper,children:Object(U.jsx)(m.a,{sx:{flexGrow:1},children:Object(U.jsx)(v.a,{position:"fixed",children:Object(U.jsxs)(C.a,{children:[Object(U.jsxs)("nav",{className:M.a.nav,children:[Object(U.jsx)(a.b,{to:"/",exact:!0,className:M.a.link,activeClassName:"activeLink",children:"Home"}),t&&Object(U.jsx)(a.b,{to:"/contacts",exact:!0,className:M.a.link,activeClassName:"activeLink",children:"Contacts"})]}),t?Object(U.jsx)(I,{}):Object(U.jsx)(L,{})]})})})})},G=n(30),z=n(40),V=["children","redirectedTo"],W=function(t){var e=t.children,n=t.redirectedTo,r=void 0===n?"./":n,c=Object(z.a)(t,V),a=Object(u.c)(j.c.getIsLoggedIn);return Object(U.jsx)(x.b,Object(G.a)(Object(G.a)({},c),{},{children:a?e:Object(U.jsx)(x.a,{to:r})}))},A=["children","restricted","redirectedTo"],E=function(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectedTo,a=void 0===c?"./":c,s=Object(z.a)(t,A),o=Object(u.c)(j.c.getIsLoggedIn);return Object(U.jsx)(x.b,Object(G.a)(Object(G.a)({},s),{},{children:o&&r?Object(U.jsx)(x.a,{to:a}):e}))},F=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,178))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,182))})),B=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(9),n.e(5)]).then(n.bind(null,181))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8),n.e(4)]).then(n.bind(null,180))})),J=function(){var t=Object(u.b)(),e=Object(u.c)(j.c.getIsGetCurrentUser);return Object(r.useEffect)((function(){return t(j.a.getCurrentUser())}),[t]),Object(U.jsx)(U.Fragment,{children:!e&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(g.a,{}),Object(U.jsx)(T,{}),Object(U.jsx)(r.Suspense,{fallback:Object(U.jsx)("p",{children:"Load..."}),children:Object(U.jsxs)(x.d,{children:[Object(U.jsx)(E,{exact:!0,path:"/",children:Object(U.jsx)(F,{})}),Object(U.jsx)(E,{exact:!0,path:"/register",redirectedTo:"/contacts",restricted:!0,children:Object(U.jsx)(S,{})}),Object(U.jsx)(E,{exact:!0,path:"/login",redirectedTo:"/contacts",restricted:!0,children:Object(U.jsx)(B,{})}),Object(U.jsx)(W,{exact:!0,path:"/contacts",redirectedTo:"/login",children:Object(U.jsx)(H,{})}),Object(U.jsx)(x.b,{children:Object(U.jsx)(x.a,{to:"/"})})]})})]})})};Object(c.render)(Object(U.jsx)(r.StrictMode,{children:Object(U.jsx)(u.a,{store:p,children:Object(U.jsx)(s.a,{loading:null,persistor:h,children:Object(U.jsx)(a.a,{children:Object(U.jsx)(J,{})})})})}),document.getElementById("root"))},13:function(t,e,n){"use strict";n.d(e,"a",(function(){return c.a})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o}));var r,c=n(25),a={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUserEmail:function(t){return t.auth.user.email},getToken:function(t){return t.auth.token},getIsGetCurrentUser:function(t){return t.auth.isGetCurrentUser}},u=n(5),s=n(8),o=Object(s.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isGetCurrentUser:!1},extraReducers:(r={},Object(u.a)(r,c.a.register.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(u.a)(r,c.a.logIn.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(u.a)(r,c.a.getCurrentUser.pending,(function(t,e){t.isGetCurrentUser=!0})),Object(u.a)(r,c.a.getCurrentUser.fulfilled,(function(t,e){var n=e.payload;t.user.name=n.name,t.user.email=n.email,t.isLoggedIn=!0,t.isGetCurrentUser=!1})),Object(u.a)(r,c.a.getCurrentUser.rejected,(function(t,e){t.isGetCurrentUser=!1})),Object(u.a)(r,c.a.logOut.fulfilled,(function(t,e){t.user=null,t.token=null,t.isLoggedIn=!1})),r)}).reducer},24:function(t,e,n){"use strict";var r=n(7),c=n.n(r),a=n(19),u=n(20),s=n.n(u);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},i=function(t){s.a.defaults.headers.common.Authorization=""},l={getContacts:function(){return s.a.get("/contacts").then((function(t){return t.data}))},addContact:function(t){return s.a.post("/contacts",t).then((function(t){return t.data}))},deleteContact:function(t){return s.a.delete("/contacts/".concat(t))},editContact:function(t){var e=t.id,n=t.name,r=t.number;return s.a.patch("/contacts/".concat(e),{name:n,number:r}).then((function(t){return t.data}))},registerNewUser:function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.a.post("/users/signup",e).then((function(t){var e=t.data;return o(e.token),e})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),loginUser:function(t){return s.a.post("/users/login",t).then((function(t){var e=t.data;return o(e.token),e}))},getCurrentUser:function(t){return o(t),s.a.get("/users/current").then((function(t){return t.data}))},logOutUser:function(){s.a.post("/users/logout"),i()}};e.a=l},25:function(t,e,n){"use strict";var r=n(7),c=n.n(r),a=n(19),u=n(24),s=n(8),o={register:Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.registerNewUser(e);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.loginUser(e);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),getCurrentUser:Object(s.c)("auth/getCurrentUser",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=n.getState(),a=r.auth.token){t.next=5;break}return t.abrupt("return",n.rejectWithValue());case 5:return t.next=7,u.a.getCurrentUser(a);case 7:return t.abrupt("return",t.sent);case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()),logOut:Object(s.c)("auth/logout",Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.logOutUser();case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))))};e.a=o},38:function(t,e,n){t.exports={userMenu:"UserMenu_userMenu__3pieI",avatar:"UserMenu_avatar__kjnyw",text:"UserMenu_text__21-7O",mail:"UserMenu_mail__DBCmU",button:"UserMenu_button__1l1-A"}},39:function(t,e,n){t.exports={nav:"Header_nav__3cINO",link:"Header_link__1c4Iu"}},53:function(t,e,n){t.exports={button:"AuthNav_button__1JIOu"}},56:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return U})),n.d(e,"a",(function(){return g}));var r,c=n(7),a=n.n(c),u=n(19),s=n(24),o=n(8),i=Object(o.c)("contacts/fetchContacts",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.getContacts();case 4:return c=t.sent,t.abrupt("return",c);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),l={addContact:Object(o.c)("contacts/addContact",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.addContact(e);case 4:return c=t.sent,t.abrupt("return",c);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),deleteContact:Object(o.c)("contacts/deleteContact",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.deleteContact(e);case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),getContacts:i,editContact:Object(o.c)("contacts/editContact",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.editContact(e);case 4:return c=t.sent,t.abrupt("return",c);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}())},d=n(32),b=function(t){return t.contacts.items},j=function(t){return t.contacts.filter},f={getItems:b,getFilter:j,getVisibleItems:Object(d.a)([b,j],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.number.includes(e)}))}))},p=n(5),h=n(22),O=n(9),g=Object(o.b)("contacts/changeFilter"),x=l.getContacts,v=l.addContact,m=l.deleteContact,C=l.editContact,k=Object(o.d)([],(r={},Object(p.a)(r,x.fulfilled,(function(t,e){return e.payload})),Object(p.a)(r,v.fulfilled,(function(t,e){return[e.payload].concat(Object(h.a)(t))})),Object(p.a)(r,m.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(p.a)(r,C.fulfilled,(function(t,e){var n=e.payload;return Object(h.a)(t).map((function(t){return t.id===n.id?n:t}))})),r)),w=Object(o.d)("",Object(p.a)({},g,(function(t,e){return e.payload}))),U=Object(O.b)({items:k,filter:w})}},[[126,2,3]]]);
//# sourceMappingURL=main.b8e224fc.chunk.js.map